<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>APS3E Compatibility List</title>
<style>
body { font-family: sans-serif; margin: 20px; background: #f9f9f9; color: #222; }
h1 { margin-bottom: 10px; }

.tags { margin-bottom: 20px; display: flex; flex-wrap: wrap; gap: 10px; }
.tag { padding: 8px 12px; border-radius: 6px; font-weight: bold; color: white; cursor: default; }
.tag.Nothing { background: #e74c3c; }
.tag.Bootable { background: #e67e22; }
.tag.Intro { background: #3498db; }
.tag.Menu { background: #9b59b6; }
.tag["Ingame -"] { background: #f1c40f; color: #222; }
.tag["Ingame +"] { background: #f39c12; color: #222; }
.tag.Playable { background: #2ecc71; }

table { width: 100%; border-collapse: collapse; margin-top: 10px; background: white; box-shadow: 0 0 5px rgba(0,0,0,0.1);}
th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
th { background: #eee; cursor: pointer; }
.status { font-weight: bold; }
.status.Nothing { color: #e74c3c; }
.status.Bootable { color: #e67e22; }
.status.Intro { color: #3498db; }
.status.Menu { color: #9b59b6; }
.status["Ingame -"] { color: #f1c40f; }
.status["Ingame +"] { color: #f39c12; }
.status.Playable { color: #2ecc71; }

.update { margin-top: 15px; font-size: 0.9em; color: #555; }
</style>
</head>
<body>

<h1>APS3E Compatibility List</h1>

<div class="tags" id="tags"></div>

<table id="compatibility">
<thead>
<tr>
<th>Title ID</th>
<th>Entry Name</th>
<th>Status</th>
</tr>
</thead>
<tbody></tbody>
</table>

<div class="update" id="lastUpdate"></div>

<script>
// JSON с данными игр и тегов
const data = {
  "lastUpdated": "27.01.2026, 17:34:20",
  "tags": [
    {"name": "Nothing", "description": "Games that don't boot at all, not displaying an initial black screen with a FPS counter."},
    {"name": "Bootable", "description": "Games that boot but display nothing more than a black screen with a FPS counter."},
    {"name": "Intro", "description": "Games that display any image on screen but doesn't reach to menus."},
    {"name": "Menu", "description": "Games that get into menu but can't enter Ingame."},
    {"name": "Ingame -", "description": "Games that go ingame but have major issues that prevents it from going further early on."},
    {"name": "Ingame +", "description": "Games that go far ingame but have glitches that render the game unplayable or have non-playable performance."},
    {"name": "Playable", "description": "Games that can be played from start to finish with playable performance and no game breaking glitches."}
  ],
  "games": [
    {"id": "BCUS98111", "name": "God of War III", "status": "Playable"},
    {"id": "BCUS98130", "name": "Uncharted 2", "status": "Ingame -"},
    {"id": "BCUS98150", "name": "LittleBigPlanet", "status": "Menu"},
    {"id": "BCUS98160", "name": "Killzone 2", "status": "Intro"},
    {"id": "BCUS98170", "name": "Resistance: Fall of Man", "status": "Bootable"},
    {"id": "BCUS98180", "name": "MotorStorm", "status": "Nothing"}
  ]
};

// Подсчет процента для каждого тега
const totalGames = data.games.length;
const tagCounts = {};
data.tags.forEach(tag => tagCounts[tag.name] = 0);
data.games.forEach(game => {
  if(tagCounts.hasOwnProperty(game.status)) tagCounts[game.status]++;
});

// Отрисовка тегов сверху
const tagsDiv = document.getElementById("tags");
data.tags.forEach(tag => {
  const count = tagCounts[tag.name] || 0;
  const percent = ((count / totalGames) * 100).toFixed(2) + "%";
  const div = document.createElement("div");
  div.className = "tag " + tag.name;
  div.innerText = `${tag.name} (${percent})`;
  div.title = tag.description;
  tagsDiv.appendChild(div);
});

// Отрисовка таблицы
const tbody = document.querySelector("#compatibility tbody");
data.games.forEach(game => {
  const tr = document.createElement("tr");
  tr.innerHTML = `
    <td>${game.id}</td>
    <td>${game.name}</td>
    <td class="status ${game.status}">${game.status}</td>
  `;
  tbody.appendChild(tr);
});

// Отрисовка даты
document.getElementById("lastUpdate").innerText = "Last Updated at: " + data.lastUpdated;
</script>

</body>
</html>
